#ifndef FILTER_H_
#define FILTER_H_

/*

 FIR filter(s) designed with
 http://t-filter.appspot.com

 */

static double lowpassImpulse[] = { -0.007841378739478247, -0.007888948215431272,
		-0.009718678129505453, -0.009776234634601727, -0.00730891192450578,
		-0.0019478042136496523, 0.005957227721681907, 0.015342233001297728,
		0.0244505354193565, 0.031152478399515966, 0.03335884913930142,
		0.029582112951520582, 0.01934342149529119, 0.003528426282687539,
		-0.015678104773609657, -0.03499368549736119, -0.05071570387259263,
		-0.0593658598753739, -0.058569688535852045, -0.04755196923810589,
		-0.027537532997002408, -0.0015362091690801238, 0.026067453610093702,
		0.05042627503844631, 0.06709954502226752, 0.0730310101613527,
		0.06709954502226752, 0.05042627503844631, 0.026067453610093702,
		-0.0015362091690801238, -0.027537532997002408, -0.04755196923810589,
		-0.058569688535852045, -0.0593658598753739, -0.05071570387259263,
		-0.03499368549736119, -0.015678104773609657, 0.003528426282687539,
		0.01934342149529119, 0.029582112951520582, 0.03335884913930142,
		0.031152478399515966, 0.0244505354193565, 0.015342233001297728,
		0.005957227721681907, -0.0019478042136496523, -0.00730891192450578,
		-0.009776234634601727, -0.009718678129505453, -0.007888948215431272,
		-0.007841378739478247 };

typedef struct {
	unsigned int last_index;
	unsigned int bufferSize;
	double *impulseResponse;
	double history[];
} Filter;

void Filter_init(Filter *f);
void Filter_put(Filter *f, double input);
double Filter_get(Filter *f);

#endif /* FILTER_H_ */
